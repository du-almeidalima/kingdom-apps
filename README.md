# Kingdom Apps

Welcome to the Kingdom Apps monorepo!

This monorepo contains projects aimed to help the ministry and congregation work.
Although its purpose is related to Jehovah's Witnesses organization work, this is not associated by any means with the
Jehovah Witness and any of its trademarks.

## Structure

This monorepo is divided in Apps and Libs.

- **Apps** are the deployable application that the end user is going to use; that includes the Ministry Maps project.
- **Libs** are shareable code that applications can import and use, those are not deployable and shouldn't contain application-specific logic.

## Prerequisites

To run and deploy the Kingdom Apps monorepo, you will need:

- Node.js - 20~
- NPM - 9~
- [Firebase Tools](https://github.com/firebase/firebase-tools)

## Projects

- Ministry Maps: PWA application to manage territory and designations for the ministry service.

## Development

To run the application using firebase emulator:

Install firebase emulator following the installation instructions: https://firebase.google.com/docs/emulator-suite/install_and_configure

Run `npm start` to start the local dev server. Navigate to http://localhost:4200/. The app will automatically reload if you change any of the source files.

You can check firebase emulator ui navigating to http://127.0.0.1:4000/

To not use the emulator and connect to firebase in the cloud, set NX_USE_CLOUD=true into your .env file and run `nx serve ministry-maps`. Be sure to clean any cached data from your browser when switching from local to cloud. This includes any value stored in localStorage.

### Seeding Data

Firebase Emulator doesn't persist any data.
Everytime it's served, it uses the backed-up data in:
```
tools 
└───executors
    └───firebase-emulators
        └───seed
```

To update the **seed** data back-up, run the command: 

`firebase emulators:export tools/executors/firebase-emulator/seed`

> **_NOTE:_** Anytime a change that requires DB data to work is made, please, run the above command and add it to the Pull Request before merging your feature. 

## Understand this workspace

Run `nx graph` to see a diagram of the dependencies of the projects.

## Further help

Visit the [Nx Documentation](https://nx.dev) to learn more.

<a href="https://nx.dev" target="_blank" rel="noreferrer"><img src="https://raw.githubusercontent.com/nrwl/nx/master/images/nx-logo.png" width="45"></a>

✨ **This workspace has been generated by [Nx, a Smart, fast and extensible build system.](https://nx.dev)** ✨
